jQuery(document).ready(function(a){var b={token_selector:".bfwc-payment-method-token",container:".braintree-payment-gateway",new_method_container:".bfwc-new-payment-method-container",saved_method_container:".bfwc-payment-method-container",init:function(){this.has_payment_methods()&&(setInterval(this.check_elements,2e3),a(document.body).on("updated_checkout",this.check_elements),a(document.body).on("click",".bfwc-payment-method-buttons .bfwc-cancel-saved",b.display_new_payment_method_container),a(document.body).on("click",".bfwc-saved-methods",b.display_saved_methods),a(document.body).on("click",".braintree-payment-method",b.payment_method_selected),a(document.body).on("change","select.bfwc-selected-payment-method",b.update_card_from_select),this.initialize_elements())},initialize_elements:function(){a().select2&&(braintree_payment_methods_vars.wc["3.0.0"]?a(".bfwc-selected-payment-method").length&&!a(".bfwc-selected-payment-method").hasClass("select2-hidden-accessible")&&a(".bfwc-selected-payment-method").select2({width:"100%",templateResult:b.template_result,templateSelection:b.template_selection}):a(".bfwc-selected-payment-method").length&&!a(".select2-container.bfwc-select2-initialized").length&&a(".bfwc-selected-payment-method").select2({containerCssClass:"bfwc-select2-initialized",formatResult:b.format_result,formatSelection:b.format_selection}))},check_elements:function(){b.initialize_elements()},payment_method_selected:function(c){b.is_inline()&&(a(this).closest(b.container).find(".braintree-payment-method").removeClass("selected"),a(this).addClass("selected"),a(this).closest(b.container).find(b.token_selector).val(a(this).attr("data-token")))},set_payment_method:function(a){if(b.is_inline()){var c=a.closest(b.container).find(".braintree-payment-method.selected").attr("data-token");a.closest(b.container).find(b.token_selector).val(c)}else if(b.is_dropdown()){var c=a.closest(b.container).find("select.bfwc-selected-payment-method").val();a.closest(b.container).find(b.token_selector).val(c)}},remove_selected_method:function(a){a.closest(b.container).find(b.token_selector).val("")},has_payment_methods:function(){return a(".bfwc-payment-method-container").length},display_saved_methods:function(c){c.preventDefault(),b.set_payment_method(a(this));a(this).closest(b.container);a(this).closest(b.container).find("select.bfwc-selected-payment-method").change(),a(this).closest(b.container).find(b.new_method_container).slideUp(400,function(){a(this).closest(b.container).find(b.saved_method_container).slideDown(400),a(document.body).trigger("bfwc_display_saved_methods")})},display_new_payment_method_container:function(c){c.preventDefault();a(this).closest(b.container);b.remove_selected_method(a(this)),a(this).closest(b.container).find(b.saved_method_container).slideUp(400,function(){a(this).closest(b.container).find(b.new_method_container).slideDown(400),a(document.body).trigger("bfwc_display_new_payment_method_container")})},update_card_from_select:function(){a(this).closest(b.container).find(b.token_selector).val(a(this).val())},is_inline:function(){return"inline"===braintree_payment_methods_vars.style},is_dropdown:function(){return"dropdown"===braintree_payment_methods_vars.style},format_result:function(b,c){return a(c).addClass("select2-bfwc-result-label"),'<span class="select2-cardType '+braintree_payment_methods_vars.icon_style+" "+a(b.element).attr("data-bfwc-cardType")+'"></span>'+b.text},format_selection:function(b,c){return a(c).addClass("select2-bfwc-chosen"),'<span class="select2-cardType '+braintree_payment_methods_vars.icon_style+" "+a(b.element).attr("data-bfwc-cardType")+'"></span><span>'+b.text+"</span>"},template_result:function(b,c){a(c).addClass("select2-bfwc-result-label");var d='<span class="select2-cardType '+braintree_payment_methods_vars.icon_style+" "+a(b.element).attr("data-bfwc-cardType")+'"></span>'+b.text;return a.parseHTML(d)},template_selection:function(b,c){a(c).addClass("select2-bfwc-chosen"),a(c).closest(".select2-container").addClass("bfwc-select2-4");var d='<span class="select2-cardType '+braintree_payment_methods_vars.icon_style+" "+a(b.element).attr("data-bfwc-cardType")+'"></span><span>'+b.text+"</span>";return a.parseHTML(d)}};b.init()});